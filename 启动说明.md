# 🚀 AI智慧学习平台 - 启动说明

## 📋 启动方式

### 方式一：详细输出模式（推荐用于开发调试）

```bash
python start_system_verbose.py
```

**特点：**
- ✅ 显示前后端的所有实时输出
- ✅ 可以看到API请求日志
- ✅ 可以看到数据库操作日志
- ✅ 可以看到错误信息
- ✅ 适合开发和调试

**输出示例：**
```
🎓 AI智慧学习平台 - 详细输出模式
==================================================
📝 此模式将显示前后端的所有输出内容
📝 按 Ctrl+C 停止所有服务
==================================================
✅ 所有依赖已安装
🚀 启动后端API服务器...
🔧 初始化数据库...
✅ 数据库初始化成功
🔄 正在启动后端服务器...
✅ 后端服务器启动成功
🚀 启动AI智慧学习平台API服务器...
📖 API文档地址: http://localhost:8000/docs
🔗 前端地址: http://localhost:8501
✅ 后端API服务器已就绪
🎨 启动前端Streamlit应用...
🔄 正在启动前端应用...
✅ 前端应用启动成功
🎉 系统启动成功！
📖 API文档: http://localhost:8000/docs
🎨 前端应用: http://localhost:8501
==================================================
💡 现在您可以看到前后端的实时输出
💡 按 Ctrl+C 停止所有服务
```

### 方式二：静默模式（推荐用于生产环境）

```bash
python start_system.py
```

**特点：**
- ✅ 只显示启动状态信息
- ✅ 不显示详细的日志输出
- ✅ 界面更清爽
- ✅ 适合生产环境使用

### 方式三：分别启动（适合单独调试）

**启动后端：**
```bash
cd backend
python init_database.py  # 初始化数据库
python api_server.py     # 启动API服务器
```

**启动前端（新终端）：**
```bash
cd frontend
streamlit run app.py --server.port 8501
```

## 🔍 查看输出内容

### 1. 后端API输出

在详细输出模式下，您可以看到：

- **数据库初始化信息**：
  ```
  🔧 初始化数据库...
  ✅ 数据库表结构创建成功
  ✅ 表 users: 3 条记录
  ✅ 表 knowledge_nodes: 4 条记录
  ```

- **API服务器启动信息**：
  ```
  🚀 启动AI智慧学习平台API服务器...
  📖 API文档地址: http://localhost:8000/docs
  🔗 前端地址: http://localhost:8501
  INFO:     Uvicorn running on http://0.0.0.0:8000
  ```

- **API请求日志**：
  ```
  INFO:     127.0.0.1:8501 - "GET /health HTTP/1.1" 200 OK
  INFO:     127.0.0.1:8501 - "GET /users HTTP/1.1" 200 OK
  INFO:     127.0.0.1:8501 - "GET /knowledge-map/1 HTTP/1.1" 200 OK
  ```

### 2. 前端Streamlit输出

在详细输出模式下，您可以看到：

- **Streamlit启动信息**：
  ```
  You can now view your Streamlit app in your browser.
  Local URL: http://localhost:8501
  Network URL: http://192.168.1.100:8501
  ```

- **页面加载信息**：
  ```
  [2024-01-15 10:30:00] INFO: Loading app...
  [2024-01-15 10:30:01] INFO: App loaded successfully
  ```

- **API调用信息**：
  ```
  [2024-01-15 10:30:02] INFO: API request to /users
  [2024-01-15 10:30:02] INFO: API response received
  ```

## 🛠️ 调试技巧

### 1. 查看API文档

启动后访问：http://localhost:8000/docs

这里可以看到：
- 所有可用的API接口
- 请求参数说明
- 响应格式示例
- 在线测试功能

### 2. 查看数据库内容

```bash
cd backend
sqlite3 ../data/my_database.db
```

常用命令：
```sql
.tables                    -- 查看所有表
SELECT * FROM users;       -- 查看用户
SELECT * FROM knowledge_nodes;  -- 查看知识点
SELECT * FROM questions;   -- 查看题目
```

### 3. 测试API接口

```bash
python test/test_api.py
```

这会测试所有API接口是否正常工作。

### 4. 查看错误日志

如果遇到问题，详细输出模式会显示：
- 数据库连接错误
- API请求错误
- 前端加载错误
- 依赖缺失错误

## 🚨 常见问题

### 1. 端口被占用

**错误信息：**
```
Address already in use
```

**解决方案：**
```bash
# 查找占用端口的进程
lsof -i :8000  # 后端端口
lsof -i :8501  # 前端端口

# 杀死进程
kill -9 <进程ID>
```

### 2. 数据库文件权限问题

**错误信息：**
```
Permission denied: ../data/my_database.db
```

**解决方案：**
```bash
# 确保data目录存在
mkdir -p data

# 设置正确的权限
chmod 755 data
```

### 3. 依赖缺失

**错误信息：**
```
ModuleNotFoundError: No module named 'fastapi'
```

**解决方案：**
```bash
pip install -r backend/requirements.txt
```

## 📞 获取帮助

如果遇到问题：

1. **查看详细输出**：使用 `start_system_verbose.py`
2. **检查API文档**：访问 http://localhost:8000/docs
3. **运行测试**：执行 `python test/test_api.py`
4. **查看数据库**：使用 SQLite 客户端
5. **检查日志**：查看控制台输出

---

🎓 **AI智慧学习平台** - 让学习更智能，让进步更高效！ 