# AI智慧学习平台 - 前端重构说明

## 🎯 重构概述

本次重构将原有的单一学生界面扩展为支持**教师**和**学生**两种角色的完整系统，实现了角色分离和功能模块化。

## 📁 新的目录结构

```
frontend/
├── app.py                 # 主应用入口，支持角色选择
├── config.py              # 配置文件，包含角色选择器
├── services/              # API服务层
│   ├── __init__.py
│   └── api_service.py
├── pages/                 # 页面模块
│   ├── __init__.py
│   ├── student/           # 学生端页面
│   │   ├── __init__.py
│   │   ├── daily_tasks.py      # 今日任务
│   │   ├── free_practice.py    # 自由练习
│   │   ├── knowledge_map.py    # 知识图谱
│   │   ├── self_assessment.py  # 自我测评
│   │   └── wrong_questions.py  # 错题集
│   └── teacher/           # 教师端页面
│       ├── __init__.py
│       ├── knowledge_management.py      # 知识点管理
│       ├── question_management.py       # 题目管理
│       └── knowledge_graph_builder.py   # 知识图谱构建
└── README_NEW.md          # 本说明文件
```

## 🚀 新功能特性

### 1. 角色选择系统
- **登录界面**: 支持选择教师或学生角色
- **用户过滤**: 根据角色显示对应的用户列表
- **界面切换**: 不同角色显示不同的功能界面

### 2. 学生端功能（保持原有）
- 📋 今日任务
- 🎯 自由练习
- 🗺️ 知识图谱
- 📊 自我测评
- ❌ 错题集

### 3. 教师端功能（全新）

#### 📚 知识点管理
- **增删改查**: 完整的知识点CRUD操作
- **搜索过滤**: 按名称、ID、难度等级搜索
- **批量操作**: 支持批量编辑和删除
- **统计分析**: 知识点数量、难度分布等统计

#### 📝 题目管理
- **题目CRUD**: 创建、编辑、删除题目
- **多种题型**: 支持选择题、填空题、解答题
- **状态管理**: 草稿和已发布状态
- **图片上传**: 支持题目配图
- **关联管理**: 题目与知识点的关联关系

#### 🕸️ 知识图谱构建
- **可视化图谱**: 基于D3.js的交互式知识图谱
- **关系管理**: 知识点间的前置、相关、包含等关系
- **AI建议**: 智能推荐可能的知识点关系
- **图谱分析**: 节点重要性、连通性等分析指标

## 🔧 技术实现

### 前端技术栈
- **Streamlit**: 主要UI框架
- **D3.js**: 知识图谱可视化
- **Pandas**: 数据处理和展示
- **Python**: 核心逻辑

### 架构设计
- **模块化**: 按角色和功能分离页面模块
- **API驱动**: 所有数据操作通过API接口
- **状态管理**: 使用Streamlit session state管理用户状态
- **响应式**: 支持不同屏幕尺寸的自适应布局

## 📋 API接口设计

详细的API接口文档请参考：`TEACHER_API_DOCUMENTATION.md`

### 主要接口分类
1. **知识点管理**: `/api/teacher/knowledge-nodes/*`
2. **题目管理**: `/api/teacher/questions/*`
3. **关系管理**: `/api/teacher/knowledge-edges/*`
4. **图谱分析**: `/api/teacher/knowledge-graph/*`
5. **用户管理**: `/api/users/*`

## 🎨 UI/UX 设计

### 设计原则
- **角色导向**: 不同角色显示不同的界面和功能
- **直观易用**: 清晰的导航和操作流程
- **视觉一致**: 统一的色彩和组件风格
- **响应反馈**: 及时的操作反馈和状态提示

### 色彩方案
- **学生端**: 蓝色系，体现学习和成长
- **教师端**: 橙色系，体现管理和指导
- **通用元素**: 绿色（成功）、红色（错误）、黄色（警告）

## 🚀 启动方式

### 方法1: 使用启动脚本（推荐）
```bash
python start_system.py
```

### 方法2: 手动启动
```bash
# 启动后端
cd backend
python api_server.py

# 启动前端
cd frontend
streamlit run app.py --server.port 8501
```

## 📊 数据库设计

系统使用SQLite数据库，主要表结构：

- **users**: 用户表（区分教师和学生）
- **knowledge_nodes**: 知识点表
- **knowledge_edges**: 知识点关系表
- **questions**: 题目表
- **question_to_node_mapping**: 题目知识点关联表
- **user_answers**: 用户答题记录
- **wrong_questions**: 错题记录

## 🔒 权限控制

### 角色权限
- **学生**: 只能访问学习相关功能，不能修改系统数据
- **教师**: 可以管理知识点、题目和图谱，查看学生学习数据
- **AI_System**: 系统虚拟用户，用于记录AI生成的内容

### 数据安全
- 所有用户输入都进行验证和清理
- API接口包含权限检查
- 敏感操作需要二次确认

## 🧪 测试说明

### 测试用户
- **学生**: 小崔、小陈
- **教师**: 胡老师
- **系统**: AI_System

### 测试流程
1. 选择角色（教师/学生）
2. 选择对应的用户
3. 测试相应的功能模块
4. 验证数据的增删改查操作

## 🔮 未来规划

### 短期目标
1. 完善后端API实现
2. 添加用户认证和授权
3. 优化知识图谱可视化效果
4. 增加数据导入导出功能

### 长期目标
1. 集成真实的AI推荐算法
2. 添加实时协作功能
3. 支持多学科知识图谱
4. 移动端适配
5. 多语言支持

## 🐛 已知问题

1. **API集成**: 需要确保与后端API的完整集成
2. **图片上传**: 图片上传功能需要配置文件存储
3. **性能优化**: 大量数据时的加载性能需要优化
4. **浏览器兼容**: 知识图谱可视化在某些浏览器中可能有兼容性问题

## 📞 技术支持

如有问题或建议，请联系开发团队或提交Issue。

---

**版本**: v2.0  
**更新时间**: 2024年12月  
**开发团队**: AI智慧学习平台开发组